<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf8">
		<title>Chess online &#9816;</title>
		<link rel="stylesheet" type="text/css" href="chess.css">
		<script src="messages.js"></script>
		<script src="chess.js"></script>
		<script src="server.js"></script>
		<script src="game.js"></script>
	</head>
	<body>
		<h1>Chess &#9816;</h1>
		<noscript>Please, enable JavaScript</noscript>
		<div id="game">
			<div id="messages">
			</div>
			<canvas id="board"></canvas>
			<div id="misc">
				<div id="pieces">
					<p>Captured pieces</p>
					<div id="white"></div>
					<div id="black"></div>
				</div>
			</div>
		</div>
		<script>
			const HOST = "{{ host }}";
			const PORT = "{{ port }}";
			const ADDRESS = HOST + ":" + PORT;
			const startingPosition = "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";
			const board = new Board(startingPosition);
			const conn = new WebSocket('ws://' + ADDRESS + '/ws');
			const boardViewer = new BoardViewer(document.getElementById("board"), board, (32+64)/2, conn);
			const messages = new Messages(document.getElementById("messages"), boardViewer.height);
			messages.add("Waiting a player...");
			boardViewer.draw();
			const game = new Game(conn, boardViewer, messages);
			document.getElementById("misc").style.height = boardViewer.height + "px";
		</script>
	</body>
</html>

<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf8">
		<title>Chess online &#9816;</title>
		<link rel="stylesheet" type="text/css" href="chess.css">
		<script src="messages.js"></script>
		<script src="chess.js"></script>
	</head>
	<body>
		<h1>Chess &#9816;</h1>
		<noscript>Please, enable JavaScript</noscript>
		<!--<section id="game">-->
			<div id="messages" class="center">
			</div>
			<canvas id="board" class="center"></canvas>
		<!--</section>-->
		<script>
			const HOST = "{{ host }}";
			const PORT = "{{ port }}";
			const ADDRESS = HOST + ":" + PORT;
			const startingPosition = "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";
			const board = new Board(startingPosition);
			const boardViewer = new BoardViewer(document.getElementById("board"), board, (32+64)/2);
			const messages = new Messages(document.getElementById("messages"));
			boardViewer.draw();
			const conn = new WebSocket('ws://' + ADDRESS + '/ws');
			conn.addEventListener('message', event => messages.add(event.data));
			conn.addEventListener('open', (event) => {
				//console.log("something", something, this);
				event.target.send("Hola mundo");
			});
		</script>
	</body>
</html>
